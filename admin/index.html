
<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Panel Admin Masjid</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      margin: 0;
      font-family: 'Inter', sans-serif;
      font-size: 15px;
      background-color: #f4f6f9;
      display: flex;
      height: 100vh;
      overflow: hidden;
    }
    .toggle-btn {
      display: none;
      position: fixed;
      top: 15px;
      left: 15px;
      z-index: 999;
      background-color: #1e293b;
      color: white;
      padding: 10px 15px;
      border: none;
      border-radius: 4px;
      font-size: 18px;
      cursor: pointer;
    }
    .sidebar {
      width: 250px;
      background-color: #1e293b;
      color: white;
      display: flex;
      flex-direction: column;
      padding: 1em;
	  padding-bottom: 4em;
      transition: transform 0.3s ease;
      overflow-y: auto;
      height: calc(100vh - 0px);
      z-index: 998;
      font-size: 15px;
	  transform: translateX(0);
    }
    .sidebar h2 {
      font-size: 1.2em;
      margin-bottom: 1em;
      text-align: center;
      color: #38bdf8;
    }
    .sidebar a, .sidebar .menu-item {
      color: white;
      text-decoration: none;
      padding: 0.6em;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-radius: 4px;
      transition: background 0.3s;
      cursor: pointer;
    }
    .sidebar a:hover, .sidebar .menu-item:hover {
      background-color: #334155;
    }
    .submenu {
      display: none;
      padding-left: 20px;
      font-size: 0.95em;
      background-color: #475569;
      border-radius: 4px;
      margin: 4px 0;
    }
    .submenu a {
      padding: 0.5em 0.6em;
      display: block;
    }
    .sidebar .section-label {
      font-size: 0.85em;
      color: #94a3b8;
      padding: 0.4em 0.6em;
      margin-top: 1em;
      text-transform: uppercase;
    }
    .content {
      flex: 1;
      margin-left: 250px;
      padding: 2em;
      overflow-y: auto;
      transition: margin-left 0.3s;
	  width: 100%;
    }
    .tab {
      display: none;
    }
    .tab.active {
      display: block;
    }
    .table img {
      height: 50px;
      width: auto;
    }
	 @media (max-width: 768px) {
      .sidebar {
        transform: translateX(-100%);
    }
       .sidebar.active {
        transform: translateX(0);
    }
	.toggle-btn {
        display: block;
    }
	  .content {
        margin-left: 0 !important;
    }
	  body {
        overflow-x: hidden;
    }
      table {
        width: 100%;
		form {
        max-width: 100%;
      }
    }
  </style>
</head>
<body>
  <button class="toggle-btn" onclick="toggleSidebar()">☰</button>
  <div class="sidebar" id="sidebar">
    <h2><i class="fas fa-mosque"></i> Admin Masjid</h2>
    <div class="menu-item" onclick="showTab('dasbor')">Dasbor</div>
    <hr style="border-color:#475569; margin: 0.5em 0;">
    <div class="section-label">Manajemen Konten</div>
    <div class="menu-item" onclick="showTab('beranda')">Beranda</div>
    <div class="menu-item" onclick="toggleSubmenu(this)">Profil <i class="fas fa-chevron-right"></i></div>
    <div class="submenu">
      <a onclick="showTab('profil-masjid')">Profil Masjid</a>
      <a onclick="showTab('sejarah')">Sejarah Masjid</a>
      <a onclick="showTab('pengurus')">Pengurus</a>
    </div>
    <div class="menu-item" onclick="toggleSubmenu(this)">Program <i class="fas fa-chevron-right"></i></div>
    <div class="submenu">
      <a onclick="showTab('keagamaan')">Keagamaan & Dakwah</a>
      <a onclick="showTab('ekonomi')">Ekonomi & Sosial</a>
      <a onclick="showTab('sarana')">Sarana & Prasarana</a>
    </div>
    <div class="menu-item" onclick="showTab('berita')">Berita</div>
    <div class="menu-item" onclick="showTab('artikel')">Artikel</div>
    <div class="menu-item" onclick="toggleSubmenu(this)">Galeri <i class="fas fa-chevron-right"></i></div>
    <div class="submenu">
      <a onclick="showTab('foto')">Foto</a>
      <a onclick="showTab('video')">Video</a>
    </div>
    <div class="menu-item" onclick="showTab('donasi')">Donasi</div>
    <div class="menu-item" onclick="showTab('laporan')">Laporan</div>
    <div class="menu-item" onclick="showTab('kontak')">Kontak</div>
    <hr style="border-color:#475569; margin: 0.8em 0;">
    <div class="menu-item" onclick="showTab('pengaturan')">Pengaturan</div>
    <hr style="border-color:#475569; margin: 0.8em 0 auto;">
    <div class="menu-item" onclick="window.location.href='/'">← Kembali ke Website Masjid</div>
  </div>

  <div class="content">
    <div id="dasbor" class="tab active">
      <h2 style="font-size: 1.5em;">Dasbor</h2>
      <p>Selamat datang di Panel Admin Masjid. Silakan pilih menu di samping untuk mulai mengelola konten website masjid.</p>
    </div>

    <div id="beranda" class="tab">
     <h2 id="judul-panel" class="mb-4">Slider</h2>
<ul class="nav nav-tabs mb-3" id="sliderTab" role="tablist">
        <li class="nav-item" role="presentation">
          <button class="nav-link active" id="slider-tab" data-bs-toggle="tab" data-bs-target="#slider" type="button" role="tab">Slider</button>
        </li>
        <li class="nav-item" role="presentation">
          <button class="nav-link" id="jadwal-tab" data-bs-toggle="tab" data-bs-target="#jadwal" type="button" role="tab">Jadwal Shalat</button>
        </li>
        <li class="nav-item" role="presentation">
          <button class="nav-link" id="welcome-tab" data-bs-toggle="tab" data-bs-target="#welcome" type="button" role="tab">Selamat Datang</button>
        </li>
        <li class="nav-item" role="presentation">
          <button class="nav-link" id="cta-tab" data-bs-toggle="tab" data-bs-target="#cta" type="button" role="tab">Call To Action</button>
        </li>
        <li class="nav-item" role="presentation">
          <button class="nav-link" id="toggle-tab" data-bs-toggle="tab" data-bs-target="#toggle" type="button" role="tab">Tampilkan / Sembunyikan</button>
        </li>
      </ul>
      <div class="tab-content">
        <div class="tab-pane fade show active" id="slider" role="tabpanel">
          <div class="table-responsive">
            <table class="table table-bordered align-middle">
              <thead class="table-light">
                <tr>
                  <th>NO</th>
                  <th>GAMBAR</th>
                  <th>NAMA</th>
                  <th>URUTAN</th>
                  <th>ACTION</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>1</td>
                  <td><img src="https://via.placeholder.com/100x60?text=Slider1" alt="Slider 1"></td>
                  <td></td>
                  <td>3</td>
                  <td>
                    <button class="btn btn-sm btn-primary"><i class="fas fa-pen"></i></button>
                    <button class="btn btn-sm btn-secondary"><i class="fas fa-eye"></i></button>
                    <button class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></button>
                  </td>
                </tr>
                <tr>
                  <td>2</td>
                  <td><img src="https://via.placeholder.com/100x60?text=Slider2" alt="Slider 2"></td>
                  <td>Tampak Depan</td>
                  <td>1</td>
                  <td>
                    <button class="btn btn-sm btn-primary"><i class="fas fa-pen"></i></button>
                    <button class="btn btn-sm btn-secondary"><i class="fas fa-eye"></i></button>
                    <button class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
          <button class="btn btn-success mt-2"><i class="fas fa-plus"></i> Tambah</button>
        </div>
        <div class="tab-pane fade" id="jadwal" role="tabpanel">Belum ada konten Jadwal Shalat.</div>
        
<div class="tab-pane fade" id="welcome" role="tabpanel">
  
  <div class="card">
    <div class="card-body">
      <form onsubmit="event.preventDefault(); simpanKeGitHub();" enctype="multipart/form-data">


        <div class="form-group row mb-3">
          <label for="judul" class="col-sm-3 col-form-label">Judul :</label>
          <div class="col-sm-9">
            <input type="text" class="form-control" id="judul" name="judul" placeholder="Judul konten" value="Selamat Datang">
          </div>
        </div>

        <div class="form-group row mb-3">
          <label for="isi" class="col-sm-3 col-form-label">Isi :</label>
          <div class="col-sm-9">
            <textarea id="isi" name="isi" class="form-control" rows="6" placeholder="Tulis isi konten di sini..."></textarea>
          </div>
        </div>

        <div class="form-group row mb-3">
          <label for="gambar" class="col-sm-3 col-form-label">Gambar / Foto :</label>
          <div class="col-sm-9">
            <input type="file" id="gambar" name="gambar" class="form-control" accept="image/*">
          </div>
        </div>

        <div class="form-group row mb-4">
          <label for="tampilkan" class="col-sm-3 col-form-label">Tampilkan di Website :</label>
          <div class="col-sm-9">
            <select class="form-control" id="tampilkan" name="tampilkan">
              <option value="ya">Ya</option>
              <option value="tidak">Tidak</option>
            </select>
          </div>
        </div>

        <div class="form-group row">
          <div class="col-sm-9 offset-sm-3">
            <button type="button" class="btn btn-primary" onclick="simpanKeGitHub()">SIMPAN</button>

            <a href="#" class="btn btn-secondary">KEMBALI</a>
          </div>
        </div>

      </form>
    </div>
  </div>
</div>

        <div class="tab-pane fade" id="cta" role="tabpanel">Belum ada konten Call To Action.</div>
        <div class="tab-pane fade" id="toggle" role="tabpanel">Belum ada konten Tampilkan/Sembunyikan.</div>
      </div>
    </div>

    <div id="profil-masjid" class="tab"><h2>Profil Masjid</h2></div>
    <div id="sejarah" class="tab"><h2>Sejarah Masjid</h2></div>
    <div id="pengurus" class="tab"><h2>Pengurus</h2></div>
    <div id="keagamaan" class="tab"><h2>Keagamaan & Dakwah</h2></div>
    <div id="ekonomi" class="tab"><h2>Ekonomi & Sosial</h2></div>
    <div id="sarana" class="tab"><h2>Sarana & Prasarana</h2></div>
    <div id="berita" class="tab"><h2>Berita</h2></div>
    <div id="artikel" class="tab"><h2>Artikel</h2></div>
    <div id="foto" class="tab"><h2>Galeri Foto</h2></div>
    <div id="video" class="tab"><h2>Galeri Video</h2></div>
    <div id="donasi" class="tab"><h2>Donasi</h2></div>
    <div id="laporan" class="tab"><h2>Laporan</h2></div>
    <div id="kontak" class="tab"><h2>Kontak</h2></div>
    <div id="pengaturan" class="tab"><h2>Pengaturan</h2></div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    function toggleSidebar() {
      document.getElementById("sidebar").classList.toggle("active");
    }
    function showTab(id) {
      document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
      document.getElementById(id).classList.add('active');
      if (window.innerWidth < 768) toggleSidebar();
    }
    function toggleSubmenu(element) {
      const icon = element.querySelector('i');
      const submenu = element.nextElementSibling;
      const isOpen = submenu.style.display === 'block';
      document.querySelectorAll('.submenu').forEach(s => s.style.display = 'none');
      document.querySelectorAll('.menu-item i').forEach(i => i.className = 'fas fa-chevron-right');
      if (!isOpen) {
        submenu.style.display = 'block';
        if (icon) icon.className = 'fas fa-chevron-down';
      }
    }
  </script>

<script src="https://cdn.ckeditor.com/4.25.1-lts/standard/ckeditor.js"></script>
<script>
  CKEDITOR.replace('isi', {
    height: 00,
    toolbar: [
      { name: 'basicstyles', items: [ 'Bold', 'Italic', 'Underline' ] },
      { name: 'styles', items: [ 'FontSize', 'Font', 'Format' ] },
      { name: 'paragraph', items: [ 'NumberedList', 'BulletedList', '-', 'JustifyLeft', 'JustifyCenter', 'JustifyRight', 'JustifyBlock' ] },
      { name: 'insert', items: [ 'Image', 'Table', 'HorizontalRule' ] },
      { name: 'links', items: [ 'Link', 'Unlink' ] },
      { name: 'tools', items: [ 'Maximize', 'Source' ] }
    ],
    removePlugins: 'elementspath',
    resize_enabled: false
  });
</script>

 <script>
    // Ambil data dari GitHub JSON
    fetch("https://raw.githubusercontent.com/Segalor/Masjid_Baiturrahman/main/data/selamat_datang.json")
      .then(res => res.json())
      .then(data => {
        document.getElementById("judul").value = data.judul || "";
        document.getElementById("isi").value = data.isi || "";
        document.getElementById("tampilkan").value = data.tampilkan || "ya";
      })
      .catch(err => console.error("Gagal ambil data JSON:", err));

    // Fungsi Simpan
    function simpanKeGitHub() {
      const token = prompt("Masukkan Personal Access Token GitHub kamu:");
      if (!token) return alert("❌ Token dibutuhkan");

      const repo = "Segalor/Masjid_Baiturrahman";
      const path = "data/selamat_datang.json";
      const branch = "main";
      const apiUrl = `https://api.github.com/repos/${repo}/contents/${path}`;

      fetch(apiUrl)
        .then(res => res.json())
        .then(file => {
          const content = {
            judul: document.getElementById("judul").value,
            isi: document.getElementById("isi").value,
            tampilkan: document.getElementById("tampilkan").value
          };

          const encoded = btoa(unescape(encodeURIComponent(JSON.stringify(content))));

          fetch(apiUrl, {
            method: "PUT",
            headers: {
              "Authorization": `token ${token}`,
              "Content-Type": "application/json"
            },
            body: JSON.stringify({
              message: "Update dari panel admin",
              content: encoded,
              sha: file.sha,
              branch: branch
            })
          })
          .then(res => res.json())
          .then(result => {
            if (result.commit) {
              alert("✅ Berhasil disimpan ke GitHub!");
            } else {
              alert("⚠️ Gagal menyimpan. Cek token & repo.");
              console.log(result);
            }
          })
          .catch(err => {
            console.error(err);
            alert("❌ Error saat menyimpan.");
          });
        });
    }
  </script>
<script>
  const judulMap = {
    'slider': 'Slider',
    'jadwal': 'Jadwal Shalat',
    'welcome': 'Ubah Selamat Datang',
    'cta': 'Call To Action',
    'toggle': 'Tampilkan / Sembunyikan'
  };

  function updateJudulPanel(tabId) {
    const el = document.getElementById("judul-panel");
    if (el && judulMap[tabId]) el.textContent = judulMap[tabId];
  }

  // Jalankan saat tab-tab Bootstrap diklik
  document.addEventListener('DOMContentLoaded', () => {
    const tabList = document.querySelectorAll('#sliderTab button[data-bs-toggle="tab"]');
    tabList.forEach(tab => {
      tab.addEventListener('shown.bs.tab', function (event) {
        const targetId = event.target.getAttribute('data-bs-target').substring(1); // misal "#welcome" => "welcome"
        updateJudulPanel(targetId);
      });
    });
  });
</script>


</body>
</html>
